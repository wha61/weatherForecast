(function(){"use strict";var e={2333:function(e,t,a){var n=a(9242),i=a(3396);function r(e,t,a,n,r,o){const l=(0,i.up)("SearchView"),s=(0,i.up)("WeatherApp");return 0===n.state?((0,i.wg)(),(0,i.j4)(l,{key:0,onGetData:n.handleData},null,8,["onGetData"])):((0,i.wg)(),(0,i.j4)(s,{key:1,weatherInfo:n.weatherInfo,onChangeCity:n.changeCity},null,8,["weatherInfo","onChangeCity"]))}var o=a(4870),l=a(7139),s=a(7308);const c=e=>((0,i.dD)("data-v-0b81414e"),e=e(),(0,i.Cn)(),e),u={class:"search-view"},d={class:"container"},v={class:"title"},h=c((()=>(0,i._)("div",{class:"img-wrap"},[(0,i._)("img",{src:s,alt:"Weather Icon"})],-1))),p={class:"input"},m=c((()=>(0,i._)("i",{class:"iconfont icon-dingweixiao"},null,-1))),w=[m];function g(e,t,a,r,o,s){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",d,[(0,i._)("div",v,(0,l.zw)(r.msg),1),h,(0,i._)("div",p,[(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.cityName=e),placeholder:"City Name，ex. Shanghai",onKeyup:t[1]||(t[1]=(0,n.D2)(((...e)=>r.search&&r.search(...e)),["enter"]))},null,544),[[n.nr,r.cityName]]),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>r.search&&r.search(...e))},"Enter"),(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>r.searchByLocation&&r.searchByLocation(...e))},w)]),(0,i._)("div",{class:(0,l.C_)(["input-message",{info:!r.errorState,error:r.errorState}])},(0,l.zw)(r.message),3)])])}a(1703);var f=a(6265),_=a.n(f);const y="029289fc705bb0228328a14a9fb022ad",b=({cityName:e,lang:t})=>_().get(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${y}&lang=${t}`),I=({lat:e,lon:t,lang:a})=>_().get(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=${y}&lang=${a}`);var k={name:"SearchView",emits:["getData"],setup(e,t){let a="Welcome to Vue Weather App",n=(0,o.iH)(""),i=(0,o.iH)("Please enter city name or click location to enter app"),r=(0,o.iH)(!1);const l=async()=>{if(i.value="Loading...",""==n.value)return i.value="Please enter city name",void(r.value=!0);const e={cityName:n.value,lang:"zh_cn"},a=await b(e).then((e=>e.data)).catch((e=>e));if(200!==a.cod)return i.value="Please check if enter incorrectly",void(r.value=!0);localStorage.setItem("save_city",n.value),t.emit("getData",a)},s=()=>new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{e(t)}),(e=>{r.value=!0,1===e.code?i.value="用户拒绝获取位置信息":2===e.code?i.value="无法获取位置信息":3===e.code&&(i.value="获取地理位置信息超时(未开启定位开关/chrome需使用VPN)")}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e3}):(i.value="浏览器不支持定位",t(new Error("浏览器不支持定位")))})),c=async e=>{const a=await I({lat:e.coords.latitude,lon:e.coords.longitude,lang:"zh_cn"}).then((e=>e.data)).catch((e=>e));if(200!==a.cod)return i.value="出错了",void(r.value=!0);localStorage.setItem("save_location",JSON.stringify({coords:{latitude:e.coords.latitude,longitude:e.coords.longitude}})),t.emit("getData",a)},u=async()=>{i.value="Locating...";const e=await s();alert(`精确度:${Math.round(e.coords.accuracy)}米,纬度:${e.coords.latitude.toFixed(2)},经度:${e.coords.longitude.toFixed(2)}\n提示：使用手机定位较准确,但天气API不一定收录该城市`),c(e)};let d=null===localStorage.getItem("save_city")?"":localStorage.getItem("save_city");""!==d&&(n.value=d,l());let v=null===localStorage.getItem("save_location")?null:JSON.parse(localStorage.getItem("save_location"));return null!==v&&c(v),{msg:a,cityName:n,search:l,message:i,errorState:r,searchByLocation:u}}},S=a(89);const z=(0,S.Z)(k,[["render",g],["__scopeId","data-v-0b81414e"]]);var C=z;const D=e=>((0,i.dD)("data-v-2abebbfe"),e=e(),(0,i.Cn)(),e),x={class:"weather-app"},P={class:"container"},$={class:"city"},O={class:"city-name"},N={class:"city-country"},H={class:"weather-container"},j={class:"weather-icon"},A=["src"],F={class:"weather"},W={class:"weather-temp"},L={class:"weather-info"},V=D((()=>(0,i._)("span",null,null,-1))),E={class:"time"},U={class:"other"},q={class:"other-item"},M=D((()=>(0,i._)("div",{class:"other-item-title"},"Temperature",-1))),B={class:"other-item-info"},T={class:"other-item"},Z=D((()=>(0,i._)("div",{class:"other-item-title"},"Humidity",-1))),G={class:"other-item-info"},J={class:"other-item"},K=D((()=>(0,i._)("div",{class:"other-item-title"},"Air Pressure",-1))),Y={class:"other-item-info"},Q={class:"other-item"},R=D((()=>(0,i._)("div",{class:"other-item-title"},"Visibility",-1))),X={class:"other-item-info"},ee={class:"other-item"},te=D((()=>(0,i._)("div",{class:"other-item-title"},"Sunrise",-1))),ae={class:"other-item-info"},ne={class:"other-item"},ie=D((()=>(0,i._)("div",{class:"other-item-title"},"Sunset",-1))),re={class:"other-item-info"},oe={class:"other-item"},le={class:"other-item-title"},se={class:"other-item-info"},ce={class:"other-item"},ue=D((()=>(0,i._)("div",{class:"other-item-title"},"1h P",-1))),de={class:"other-item-info"},ve={key:0},he={class:"other-item"},pe=D((()=>(0,i._)("div",{class:"other-item-title"},"3h P",-1))),me={class:"other-item-info"},we={key:0},ge={class:"button-wrap"};function fe(e,t,a,n,r,o){return(0,i.wg)(),(0,i.iD)("div",x,[(0,i._)("div",P,[(0,i._)("div",$,[(0,i._)("span",O,(0,l.zw)(a.weatherInfo.data.name),1),(0,i._)("span",N,"-"+(0,l.zw)(a.weatherInfo.data.sys.country),1)]),(0,i._)("div",H,[(0,i._)("div",j,[(0,i._)("img",{src:`http://openweathermap.org/img/wn/${a.weatherInfo.data.weather[0].icon}@2x.png`,alt:""},null,8,A)]),(0,i._)("div",F,[(0,i._)("div",W,(0,l.zw)((a.weatherInfo.data.main.temp-273.15).toFixed(0))+"℃ ",1),(0,i._)("div",L,[(0,i._)("span",null,(0,l.zw)(a.weatherInfo.data.weather[0].main),1),V,(0,i._)("span",null,(0,l.zw)(a.weatherInfo.data.weather[0].description),1)])])]),(0,i._)("div",E,[(0,i._)("span",null,(0,l.zw)(n.time),1),(0,i._)("span",null,(0,l.zw)(n.week),1)]),(0,i._)("div",U,[(0,i._)("div",q,[M,(0,i._)("div",B,(0,l.zw)((a.weatherInfo.data.main.feels_like-273.15).toFixed(0))+"℃ ",1)]),(0,i._)("div",T,[Z,(0,i._)("div",G,(0,l.zw)(a.weatherInfo.data.main.humidity)+"% ",1)]),(0,i._)("div",J,[K,(0,i._)("div",Y,[a.weatherInfo.data.main.grnd_level?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,l.zw)(a.weatherInfo.data.main.grnd_level)+"hPa ",1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,l.zw)(a.weatherInfo.data.main.pressure)+"hPa ",1)],64))])]),(0,i._)("div",Q,[R,(0,i._)("div",X,(0,l.zw)(a.weatherInfo.data.visibility/1e3)+"KM ",1)]),(0,i._)("div",ee,[te,(0,i._)("div",ae,(0,l.zw)(n.time_sunrise),1)]),(0,i._)("div",ne,[ie,(0,i._)("div",re,(0,l.zw)(n.time_sunset),1)]),(0,i._)("div",oe,[(0,i._)("div",le,(0,l.zw)(n.wind_direction),1),(0,i._)("div",se,"Level "+(0,l.zw)(n.wind_level),1)]),(0,i._)("div",ce,[ue,(0,i._)("div",de,[(0,i.Uk)((0,l.zw)(n.rain_1h),1),0!==n.rain_1h?((0,i.wg)(),(0,i.iD)("span",ve,"mm")):(0,i.kq)("",!0)])]),(0,i._)("div",he,[pe,(0,i._)("div",me,[(0,i.Uk)((0,l.zw)(n.rain_3h),1),0!==n.rain_3h?((0,i.wg)(),(0,i.iD)("span",we,"mm")):(0,i.kq)("",!0)])])]),(0,i._)("div",ge,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>n.changeCity&&n.changeCity(...e))},"Choose another city")])])])}var _e={name:"WeatherApp",props:["weatherInfo"],emits:["change-city"],setup(e,t){const a=(0,i.Fl)((()=>e.weatherInfo.data.wind)),n=(0,i.Fl)((()=>0===a.value.deg||360===a.value.deg?"NE wind":a.value.deg>0&&a.value.deg<90?"N wind":90===a.value.deg?"E wind":a.value.deg>90&&a.value.deg<180?"SE wind":180===a.value.deg?"S wind":a.value.deg>180&&a.value.deg<270?"SW wind":270===a.value.deg?"W wind":a.value.deg>270&&a.value.deg<360?"NW wind":void 0)),r=(0,i.Fl)((()=>a.value.speed<.2?0:a.value.speed>.2&&a.value.speed<=1.5?1:a.value.speed>1.5&&a.value.speed<=3.3?2:a.value.speed>3.3&&a.value.speed<=5.4?3:a.value.speed>5.4&&a.value.speed<=7.9?4:a.value.speed>7.9&&a.value.speed<=10.7?5:a.value.speed>10.7&&a.value.speed<=13.8?6:a.value.speed>13.8&&a.value.speed<=17.1?7:a.value.speed>17.1&&a.value.speed<=20.7?8:a.value.speed>20.7&&a.value.speed<=24.4?9:a.value.speed>24.4&&a.value.speed<=28.4?10:a.value.speed>28.4&&a.value.speed<=32.6?11:a.value.speed>32.6&&a.value.speed<=36.9?12:a.value.speed>36.9&&a.value.speed<=41.4?13:a.value.speed>41.4&&a.value.speed<=46.1?14:a.value.speed>46.1&&a.value.speed<=50.9?15:a.value.speed>50.9&&a.value.speed<=56?16:a.value.speed>56&&a.value.speed<=61.2?17:void 0)),l=e=>{if("number"!==typeof e)return"获取错误";const t=new Date(1e3*e);let a=t.getHours(),n=t.getMinutes();return`${a}:${n<10?"0"+n:n}`};let s=l(e.weatherInfo.data.sys.sunrise),c=l(e.weatherInfo.data.sys.sunset);const u=new Date,d=e=>{if("number"!==typeof e)return"获取错误";let t=["日","一","二","三","四","五","六"];return`星期${t[e]}`};let v=u.toLocaleString(),h=d(u.getDay());const p=()=>{t.emit("change-city")};let m=(0,i.Fl)((()=>e.weatherInfo.data.rain)),w=(0,o.iH)(0),g=(0,o.iH)(0);return m.value&&(m.value["1h"]&&(w.value=m.value["1h"]),m.value["3h"]&&(w.value=m.value["3h"])),{wind_direction:n,wind_level:r,time_sunrise:s,time_sunset:c,time:v,week:h,changeCity:p,rain_1h:w,rain_3h:g}}};const ye=(0,S.Z)(_e,[["render",fe],["__scopeId","data-v-2abebbfe"]]);var be=ye,Ie={name:"App",components:{SearchView:C,WeatherApp:be},setup(){let e=(0,o.iH)(0),t=(0,o.qj)({});const a=a=>{e.value=1,t.data=a},n=()=>{localStorage.removeItem("save_city"),localStorage.removeItem("save_location"),e.value=0};return{state:e,handleData:a,weatherInfo:t,changeCity:n}}};const ke=(0,S.Z)(Ie,[["render",r]]);var Se=ke;(0,n.ri)(Se).mount("#app")},7308:function(e,t,a){e.exports=a.p+"img/1.e5784c15.gif"}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,i,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],r=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/vue-weather-app/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],l=n[1],s=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(s)var u=s(a)}for(t&&t(n);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},n=self["webpackChunkvue3_weather"]=self["webpackChunkvue3_weather"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(2333)}));n=a.O(n)})();
//# sourceMappingURL=app.4c398e10.js.map